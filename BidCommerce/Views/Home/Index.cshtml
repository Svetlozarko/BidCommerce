@using Microsoft.AspNetCore.Identity
@using BidCommerce.Data
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "Home";

    var user = await UserManager.GetUserAsync(User);
    var isSeller = false;

    if (user != null)
    {
        isSeller = await UserManager.IsInRoleAsync(user, "Seller");
    }
}

<div class="container mt-5">
    <h1 class="mb-4">Welcome to BidCommerce!</h1>

    @if (SignInManager.IsSignedIn(User) && isSeller)
    {
        <a asp-controller="Products" asp-action="Create" class="btn btn-success mb-4">
            + Add New Product
        </a>
    }
    else if (!SignInManager.IsSignedIn(User))
    {
        <div class="alert alert-info">
            Please <a asp-page="/Account/Login">log in</a> as a seller to list a product.
        </div>
    }
    else if (!isSeller)
    {
        <div class="alert alert-warning">
            You must switch to <strong>Seller</strong> role to create products.
        </div>
    }

    <!-- You can show other homepage content here -->
    <div class="card mt-4">
        <div class="card-body">
            <p>Browse listings, bid on auctions, or become a seller to list your own products!</p>
        </div>
    </div>
</div>
